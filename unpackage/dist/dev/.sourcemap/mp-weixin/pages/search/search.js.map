{"version":3,"sources":["uni-app:///main.js","webpack:///D:/03-projectCode/teacherProject/frontProject/uniapp/mxg-education-app/pages/search/search.vue?b055","webpack:///D:/03-projectCode/teacherProject/frontProject/uniapp/mxg-education-app/pages/search/search.vue?6429","webpack:///D:/03-projectCode/teacherProject/frontProject/uniapp/mxg-education-app/pages/search/search.vue?f39f","webpack:///D:/03-projectCode/teacherProject/frontProject/uniapp/mxg-education-app/pages/search/search.vue?440d","uni-app:///pages/search/search.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+F;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAmH;AACnH;AAC0D;AACL;;;AAGrD;AAC0L;AAC1L,gBAAgB,2LAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,4NAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAstB,CAAgB,srBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwC1uB,6H;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAVA;AACA,0B,8uDAUA,EACA,+BADA,EACA;AAEA,gBACA,gBADA,EAEA,cAFA,EAGA;AACA,0BAJA,EAKA,wBALA,EAMA,0BANA,EAHA,EAYA,MAZA,kBAYA,MAZA,EAYA;AAKA;AACA,wBACA;AACA;AACA,8CAHA,CAIA;AACA,sBACA,CANA,MAMA,CACA;AAMA;AACA,wBAEA,CAGA,CArCA;AAuCA,MAvCA,kBAuCA;AACA;AACA,kBADA,EACA;AACA,mBAFA,EAEA;AACA,kBAHA,EAGA;AACA,qBAJA,EAIA;AACA,iBALA,CAKA;AALA;AAOA,GA/CA;;AAiDA;AACA,0BAlDA,oCAkDA,CAlDA,EAkDA;AACA;AACA;AACA,GArDA;;AAuDA;AACA,mCAxDA,6CAwDA,CAxDA,EAwDA;AACA;AACA;AACA,GA3DA;;AA6DA;AACA,qCA9DA,+CA8DA,CA9DA,EA8DA;AACA;AACA;;;;;AAKA;AACA,GAtEA;;AAwEA;AACA;AACA,YAFA,oBAEA,GAFA,EAEA;AACA;AACA;AACA;;;AAGA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA,OANA;;AAQA;AACA,KA3BA;;AA6BA;AACA,kBA9BA,4BA8BA;AACA;AACA;AACA;AACA;AACA,gBADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,0CADA;AAEA;AACA;AACA,SAVA;AAWA;AACA;AACA;AACA;AACA,SAfA;;AAiBA,KAnDA,EAxEA,E","file":"pages/search/search.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=4cedc0c6&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/search/search.vue\"\nexport default component.exports","export * from \"-!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=template&id=4cedc0c6&\"","var components = {\n  uniSearchBar: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-search-bar/uni-search-bar\" */ \"@/components/uni-search-bar/uni-search-bar.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../02-devInstall/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./search.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\r\n\t\t<!-- #ifdef MP -->\r\n\t\t\t<!-- navBack()不要少了小括号 -->\n\t\t\t<uni-search-bar ref=\"searchBar\" :focus=\"focus\" radius=\"100\" placeholder=\"搜索你想要的内容\" \r\n\t\t\tclearButton=\"auto\" cancelButton=\"always\" @cancel=\"navBack(1)\"\r\n\t\t\t @confirm=\"doSearch\">\r\n\t\t\t</uni-search-bar>\r\n\t\t<!-- #endif -->\r\n\t\t<!-- 搜索关键字组件 -->\r\n\t\t<keyword @doSearch=\"doSearch\" v-if=\"!searched\"></keyword>\r\n\t\t\r\n\t\t<!-- 标签导航 -->\r\n\t\t<tab-bar v-if=\"searched\" v-model=\"tabIndex\"></tab-bar>\r\n\t\t\r\n\t\t<!-- 下拉筛选 -->\r\n\t\t<!-- <down-bar v-if=\"searched\" :params=\"params\" ></down-bar> -->\r\n\t\t\r\n\t\t<!-- 标签体内容 -->\r\n\t\t<block v-if=\"searched\" >\r\n\t\t\t<!-- 注意ref只能为 \"mescrollItem下标\" 的格式, 另外 :i=\"下标\" :index=\"tabIndex\"也是固定写法 -->\r\n\t\t\t<course-list ref=\"mescrollItem0\" :i=\"0\" :index=\"tabIndex\" :params=\"params\" :content=\"content\"></course-list>\r\n\t\t\t<article-list ref=\"mescrollItem1\" :i=\"1\" :index=\"tabIndex\" :params=\"params\" :content=\"content\"></article-list>\r\n\t\t\t<question-list ref=\"mescrollItem2\" :i=\"2\" :index=\"tabIndex\" :params=\"params\" :content=\"content\"></question-list>\r\n\t\t</block>\r\n\t\t\r\n\t</view>\n</template>\n\n<script>\r\n\t// 当前页面实例\r\n\tlet currentWebview = null\r\n\t\r\n\timport keyword from './components/keyword.vue'\r\n\timport tabBar from '@/components/common/tab-bar.vue'\r\n\t// import downBar from './components/down-bar.vue'\r\n\t\r\n\timport courseList from './components/course-list.vue'\r\n\timport articleList from './components/article-list.vue'\r\n\timport questionList from './components/question-list.vue'\r\n\timport MescrollMoreMixin from \"@/components/mescroll-uni/mixins/mescroll-more.js\"\r\n\texport default {\r\n\t\tmixins: [MescrollMoreMixin], // 多个mescroll-body写在子组件时, 则使用mescroll-more.js补充子组件的页面生命周期\r\n\t\t\r\n\t\tcomponents: {\r\n\t\t\tkeyword,\r\n\t\t\ttabBar,\r\n\t\t\t// downBar,\r\n\t\t\tcourseList,\r\n\t\t\tarticleList,\r\n\t\t\tquestionList\r\n\t\t},\r\n\t\t\r\n\t\tonLoad(option) { // 通过option接收其他页面传递的参数\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tcurrentWebview = this.$scope.$getAppWebview();\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\t// 如果有参数，不自动获取焦点；没有参数，自动获取焦点\r\n\t\t\tif(option.params) {\r\n\t\t\t\t// 解析参数，传递给属性\r\n\t\t\t\t// console.log('option', JSON.parse(option.params))\r\n\t\t\t\tthis.params = JSON.parse(option.params)\r\n\t\t\t\t//开始搜索\r\n\t\t\t\tthis.doSearch()\r\n\t\t\t}else {\r\n\t\t\t\t// 获取焦点\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\tcurrentWebview.setTitleNViewSearchInputFocus(true)\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\t// #ifdef MP\r\n\t\t\t\t// 小程序端获取焦点\r\n\t\t\t\tthis.focus = true \r\n\t\t\t\t// #endif\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\t\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tparams: null, // 其他页面带的参数\r\n\t\t\t\tcontent: null, // 搜索内容\r\n\t\t\t\tfocus: false, // 小程序端搜索框焦点\r\n\t\t\t\tsearched: false, //是否搜索过，将keyword隐藏\r\n\t\t\t\ttabIndex: 0, // 当前所在标签下标\n\t\t\t}\n\t\t},\r\n\t\t\r\n\t\t// 取消按钮，点击事件\r\n\t\tonNavigationBarButtonTap(e) {\r\n\t\t\t//后退(不需要判断index,因为只有1个按钮，如果有多个按钮再进行判断)\r\n\t\t\tthis.navBack()\r\n\t\t},\r\n\t\t\r\n\t\t// 监听原生标题栏搜索输入框输入内容变化事件\r\n\t\tonNavigationBarSearchInputChanged(e) {\r\n\t\t\t// console.log('搜索框输入的内容', e.text)\r\n\t\t\tthis.content = e.text\r\n\t\t},\r\n\t\t\r\n\t\t// 用户点击软键盘上的“搜索”按钮时触发。\r\n\t\tonNavigationBarSearchInputConfirmed(e) {\r\n\t\t\t// console.log('点击了搜索按钮', e.text)\r\n\t\t\t// 失去焦点，收起键盘\r\n\t\t\t// #ifdef APP-PLUS\r\n\t\t\tcurrentWebview.setTitleNViewSearchInputFocus(false)\r\n\t\t\t// #endif\r\n\t\t\t\r\n\t\t\tthis.doSearch()\r\n\t\t},\r\n\t\t\n\t\tmethods: {\r\n\t\t\t// 搜索动作\n\t\t\tdoSearch(obj) {\r\n\t\t\t\t// obj && obj.value 是否是小程序传递的搜索关键字\r\n\t\t\t\tthis.content = obj && obj.value ? obj.value : this.content\r\n\t\t\t\t// console.log('content', this.content)\r\n\t\t\t\t\r\n\t\t\t\t// #ifdef MP\r\n\t\t\t\t// 修改小程序端输入框内容\r\n\t\t\t\tthis.$refs.searchBar.searchVal = this.content\r\n\t\t\t\t// #endif\r\n\t\t\t\t\r\n\t\t\t\t// 搜索过，隐藏关键字keyword.vue组件\r\n\t\t\t\tthis.searched = true\r\n\t\t\t\t\r\n\t\t\t\t// 将当前搜索关键字保存到本地缓存\r\n\t\t\t\tthis.storageHistory()\r\n\t\t\t\t\r\n\t\t\t\tthis.$nextTick(() => { // 箭头函数\r\n\t\t\t\t\t// 节流处理，以防太快请求多次\r\n\t\t\t\t\tthis.$util.throttle(()=>{\r\n\t\t\t\t\t\t// 触发当前标签页的列表子组件的search开始查询\r\n\t\t\t\t\t\tthis.$refs[`mescrollItem${this.tabIndex}`].search()\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// uni.showLoading()\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 保存历史搜索关键，用于历史搜索列表展示\r\n\t\t\tstorageHistory() {\r\n\t\t\t\t// 历史搜索保存到本地的key\r\n\t\t\t\tconst key = 'history_list'\r\n\t\t\t\t// 获取当前本地已经存在的记录，\r\n\t\t\t\tuni.getStorage({\r\n\t\t\t\t\tkey, // key:key\r\n\t\t\t\t\tsuccess: (res) => { // 写箭头函数，不然里面用不了this\r\n\t\t\t\t\t\t// console.log('原历史关键字', res.data)\r\n\t\t\t\t\t\t// 查询到的原历史关键字数组，判断数组中是否存在当前关键字\r\n\t\t\t\t\t\t// 不存在则添加到数组的第1个元素，存在不添加\r\n\t\t\t\t\t\tthis.content && res.data.indexOf(this.content) < 0 \r\n\t\t\t\t\t\t\t&& res.data.unshift(this.content)\r\n\t\t\t\t\t\t// 保存到本地缓存中\r\n\t\t\t\t\t\tuni.setStorageSync(key, res.data)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (error) => {\r\n\t\t\t\t\t\t// console.log('获取历史关键字失败', error)\r\n\t\t\t\t\t\t// 如果没有保存过，则会失败，即进行第1次保存。值不要少[]是数组\r\n\t\t\t\t\t\tthis.content && uni.setStorageSync(key, [this.content] )\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}